{% extends 'partials/_master.twig' %}

{% block main %}
    <main id="content" tabindex="-1">
        <div class="subheader">
            <h1>{{ record|title }}</h1>
        </div>
        <div class="content-wrapper">
            <div class="detail-page">

                {% if record|image %}
                    <div class="package image">
                        <img src="{{ record|image|thumbnail(1080, 540, fit='crop') }}"
                             alt="{{ record|image.alt|default() }}"/>

                        {{ record|image.alt|default() }}
                    </div>

                {% endif %}

                <div class="package description">
                    <h2>{{ record.description }}</h2>
                </div>

                <div class="package fieldvalues">
                    {{ dump(record.fieldvalues) }}
                </div>
                <div class="package instructions">
                    <p class="current-version">Installation instructions:</p>
                    {% if record.packagist_type == 'bolt-theme' %}
                        composer require {{ record.packagist_name }}
                        <br>
                        bin/console bolt:copy-theme {{ record.packagist_name }}
                    {% else %}
                        composer require {{ record.packagist_name }}
                    {% endif %}
                </div>
                <div class="package screenshot">
                    {% include 'partials/_screenshots.twig' with {'record': record} %}
                </div>

                <div class="package details">
                    <ul>
                        <li>Type:
                            {% if record.packagist_type == 'bolt-theme' %}Theme{% else %}Extension{% endif %}
                        </li>
                        <li>Repository: <a href="{{ record.repository }}">{{ record.repository }}</a></li>
                        <li>Popularity: {{ record.github_stars }} stars on Github.</li>
                        <li>Created: {{ record.time|localedatetime("%B %e, %Y") }}</li>
                        <li>Last updated: {{ record.time_updated|localedatetime("%B %e, %Y") }}</li>
                        <li>Downloads: {{ record.downloads_total }} total,
                            {{ record.downloads_monthly }} monthly,
                            {{ record.downloads_daily }} daily,
                        </li>

                        <li>Maintainers:
                            {% if attribute(record.maintainers.value, 'name') is defined %}
                                {% set maintainers = [record.maintainers.value] %}
                            {% else %}
                                {% set maintainers = record.maintainers.value %}
                            {% endif %}
                            {% for maintainer in maintainers %}
                                {{ maintainer.name }}{% if not loop.last %}, {% endif %}
                            {% endfor %}

                        </li>

                        <li>Versions:
                            {% for version in record.versions.value %}
                                <span class="tag is-light">{{ version }}</span>
                            {% endfor %}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>
    {% include "partials/_sub_recent_packages.twig" %}

{% endblock main %}
